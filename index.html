<!DOCKTYPE html>

<html>
  <head>
    <title>Indian Music Tutor</title>
    <meta name="author" content="Janos Gerzson" />
    <link href="static/css/main.css" rel="stylesheet" />
    <link href="static/css/controls.css" rel="stylesheet" />
    <link href="static/css/editor.css" rel="stylesheet" />
    <link href="static/css/resource-mgr.css" rel="stylesheet" />
    <script type="text/javascript" src="static/js/main.js"></script>
    <script type="text/javascript" src="static/js/editor.js"></script>
    <script type="text/javascript" src="static/js/save.js"></script>
    <script type="text/javascript" src="static/js/client.js"></script>
  </head>
  <body>
    <div id="controls">

      <div id="transport">
        <input id="cb-play" type="checkbox" onchange="onPlayChange()"/><label for="cb-play">Play</label>
        <!-- <button onclick="play()">Play</button> -->
        <!-- <button onclick="stop()">Stop</button> -->
        <button onclick="reset()">Reset</button>
      </div>

      <div id="tempo-controls">
        <div id="bpm-container">
          <input id="bpm" type="number" min="1" max="300" value="60" onchange="setBpm()"/>
          <label for="bpm">BPM</label>
          <input id="bpmSlider" type="range" min="1" max="300" value="60" onchange="setBpmSlider()"/>
        </div>
        <div id="multiplier-container">
          <label for="multiplier">X</label>
          <input id="multiplier" type="number" min="1" max="9" value="1">
          <label for="divider">/</label>
          <input id="divider" type="number" min="1" max="4" value="1">
        </div>
      </div>

      <div id="sounds">
        <div>
          <input type="checkbox" id="cb-chime"/><label for="cb-chime">chime</label>
        </div>
        <div>
          <input type="checkbox" id="cb-click"/><label for="cb-click">click</label>
        </div>
      </div>

    </div>

    <table id="bandish-container">
      <tbody>
        <tr id="angas">
          <td class="sam">+</td>
          <td/>
          <td class="kali">o</td>
          <td/>
          <td class="tali">3</td>
          <td/>
          <td class="kali">o</td>
          <td/>
          <td class="tali">5</td>
          <td/>
          <td class="tali">6</td>
          <td/>
        </tr>
        <tr id="bols">
          <td class="sam">
            <div>Dha</div>
            <div>1</div>
          </td>
          <td>
            <div>Dha</div>
            <div>2</div>
          </td>
          <td class="kali">
            <div>Dhin</div>
            <div>3</div>
          </td>
          <td>
            <div>Ta</div>
            <div>4</div>
          </td>
          <td class="tali">
            <div>Ki te</div>
            <div>5</div>
          </td>
          <td>
            <div>Da</div>
            <div>6</div>
          </td>
          <td class="kali">
            <div>Dhin</div>
            <div>7</div>
          </td>
          <td>
            <div>Ta</div>
            <div>8</div>
          </td>
          <td class="tali">
            <div>Te te</div>
            <div>9</div>
          </td>
          <td>
            <div>Ka te</div>
            <div>10</div>
          </td>
          <td class="tali">
            <div>Ga de</div>
            <div>11</div>
          </td>
          <td>
            <div>Ga na</div>
            <div>12</div>
          </td>
        </tr>

        <tr class="separator"/>

        <tr id="edit-row">
          <td class="edit-button" colspan="2">
            <input type="checkbox" id="cb-edit" onchange="onEditToggle()"/>
            <label for="cb-edit">edit</label>
          </td>
          <td>
            <button id="bt-add-line" class="edit hidden" onclick="onAddLine()">+</button>
        </tr>
      </tbody>
    </table>

    <hr/>
    <div id="resource-mgr">
      <div id="url-div" class="grid-container">
        <label for="url-input">URL:</label>
        <input type="text" id="url-input" onchange="onURLChange()" value="http://localhost:8000"/>
        <button onclick="onRsrcMgrShowClick()">&#x21B9;</button>
      </div>

      <div id="resource-btn-box" class="grid-container show">
        <div>
          <button onclick="onListBtnClick()" id="refresh-btn">Refresh list</button>
          <div class="btn-grp">
            <button onclick="onLoadClick()">Load</button>
            <button onclick="onSaveClick()">Save</button>
          </div>
          <div class="btn-grp">
            <button onclick="onLoadClick()">Import</button>
            <button onclick="onExportClick()">Export</button>
          </div>
        </div>
        <div>
          <select name="list-dropdown" id="list-dropdown">
            <option value="">---</option>
          </select>
        </div>
      </div>
    </div>

    <audio id="sam">
      <source src="media/glass.ogg" type="audio/ogg" />
    </audio>

    <audio id="click">
      <source src="media/click.ogg" type="audio/ogg" />
    </audio>

  </body>
</html>

<script>
  const cbPlay = document.getElementById("cb-play");
  const intervalBase = 60000;
  const sam = document.getElementById("sam");
  const click = document.getElementById("click");
  const cbChime = document.getElementById("cb-chime");
  const cbClick = document.getElementById("cb-click");
  const angas = document.getElementById("angas").children;
  const bols = document.getElementById("bols").children;
  const editRow = document.getElementById("edit-row");
  const cbEdit = document.getElementById("cb-edit");
  const btAddLine = document.getElementById("bt-add-line");
  const urlInput = document.getElementById("url-input");
  const listDropdown = document.getElementById("list-dropdown");
  const resourceMgr = document.getElementById("resource-mgr");

  window.onload = (event) => reset();
</script>
